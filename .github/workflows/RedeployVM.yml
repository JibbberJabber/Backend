


on:
  push:
    branches:
      - develop

 name: AzureDeploy

 jobs:

     deploy:
       runs-on: ubuntu-latest
       steps:

       - name: Update server
         uses: appleboy/ssh-action@master
         with:
           host: ${{ secrets.DEV_IP }}
           username: ${{ secrets.USERNAME }}
           key: ${{ secrets.DEV_KEY }}
           script: |
             cd Backend
             git pull
             git checkout origin/develop
             sudo docker-compose stop
             sudo docker-compose pull
             sudo docker-compose up --detach

